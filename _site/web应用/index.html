<!DOCTYPE html>
<html>
  <head>
    <title>web快速开始 – Leap Framework – 全栈式的web应用开发框架</title>

        <meta charset="utf-8" />
    <meta content='text/html; charset=utf-8' http-equiv='Content-Type'>
    <meta http-equiv='X-UA-Compatible' content='IE=edge'>
    <meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1.0'>

    
    <meta name="description" content="快速搭建web开发环境

" />
    <meta property="og:description" content="快速搭建web开发环境

" />
    
    <meta name="author" content="Leap Framework" />

    
    <meta property="og:title" content="web快速开始" />
    <meta property="twitter:title" content="web快速开始" />
    

    <!--[if lt IE 9]>
      <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <link rel="stylesheet" type="text/css" href="/style.css" />
    <link href="//netdna.bootstrapcdn.com/font-awesome/3.2.1/css/font-awesome.css" rel="stylesheet">
    <link rel="alternate" type="application/rss+xml" title="Leap Framework - 全栈式的web应用开发框架" href="/feed.xml" />
    <link href='http://fonts.googleapis.com/css?family=Roboto:400,100,100italic,300,300italic,400italic,500,500italic,700,700italic,900,900italic' rel='stylesheet' type='text/css'>

  </head>

  <body>
    
    
    <div class="intro-header">    
      <div class="container">
        <div class="post-heading">
            <h1>web快速开始</h1>
            <span class="meta">作者：Kael 
			<br/>
			发布于 2016-12-12	
			<br/>
        </div>
            
      </div>
    </div>
    

    <div id="main" role="main" class="container">
      <article class="post">
 <div class="space-extra-small">
 </div>

  <div class="entry">
    <p>快速搭建web开发环境</p>

<h2 id="section">创建工程环境</h2>

<p>首先使用maven创建一个标准的工程模板：</p>

<div class="highlighter-rouge"><pre class="highlight"><code>$&gt; mvn archetype:generate \
-DgroupId=leap.demo \
-DartifactId=demo \
-Dversion=1.0 \
-DinteractiveMode=false \
-DarchetypeArtifactId=maven-archetype-webapp
</code></pre>
</div>

<p>创建完成的目录结构如下：</p>

<div class="highlighter-rouge"><pre class="highlight"><code>demo/
├── pom.xml
└── src
    └── main
        ├── resources
        └── webapp
            ├── index.jsp
            └── WEB-INF
                └── web.xml
</code></pre>
</div>

<p>根据模板生成的目录目前还不是标准的leap目录，我们需要手动创建一些目录和文件才能搭建成标准的leap开发工程，具体如下：</p>

<p>1 创建源码目录和测试目录：</p>

<div class="highlighter-rouge"><pre class="highlight"><code>$&gt; cd demo

// 创建目录
$&gt; mkdir src/main/java
$&gt; mkdir src/main/resources/conf
$&gt; mkdir src/test/resources -p
$&gt; mkdir src/test/java
$&gt; mkdir mkdir src/main/webapp/WEB-INF/views
$&gt; mkdir src/main/webapp/static

// 创建文件

$&gt; echo &gt;&gt; src/main/resources/conf/config.xml
$&gt; echo &gt;&gt; src/main/webapp/WEB-INF/views/index.html
</code></pre>
</div>

<p>创建完成之后我们的完整目录结构如下：</p>

<div class="highlighter-rouge"><pre class="highlight"><code>demo
├── pom.xml
└── src
    ├── main
    │   ├── java
    │   ├── resources
    │   │   └── conf
    │   │       └── config.xml
    │   └── webapp
    │       ├── index.jsp
    │       ├── static
    │       └── WEB-INF
    │           ├── views
    │           │   └── index.html
    │           └── web.xml
    └── test
        ├── java
        └── resources
</code></pre>
</div>

<p>修改几个关键配置：</p>

<p>src/main/resources/conf/config.xml</p>

<div class="language-xml highlighter-rouge"><pre class="highlight"><code><span class="cp">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="nt">&lt;config</span> <span class="na">xmlns=</span><span class="s">"http://www.leapframework.org/schema/config"</span> <span class="na">xmlns:orm=</span><span class="s">"http://www.leapframework.org/schema/orm/config"</span><span class="nt">&gt;</span>
        <span class="c">&lt;!-- 指定leap扫描的包 --&gt;</span>
        <span class="nt">&lt;base-package&gt;</span>leap.demo<span class="nt">&lt;/base-package&gt;</span>
<span class="nt">&lt;/config&gt;</span> 
</code></pre>
</div>

<p>src/main/webapp/WEB-INF/web.xml</p>

<div class="language-xml highlighter-rouge"><pre class="highlight"><code><span class="nt">&lt;web-app&gt;</span>
        <span class="nt">&lt;display-name&gt;</span>Archetype Created Web Application<span class="nt">&lt;/display-name&gt;</span>
        <span class="nt">&lt;filter&gt;</span>
                <span class="nt">&lt;filter-name&gt;</span>app-filter<span class="nt">&lt;/filter-name&gt;</span>
                <span class="nt">&lt;filter-class&gt;</span>leap.web.AppFilter<span class="nt">&lt;/filter-class&gt;</span>
        <span class="nt">&lt;/filter&gt;</span>                   
        <span class="nt">&lt;filter-mapping&gt;</span>                
                <span class="nt">&lt;filter-name&gt;</span>app-filter<span class="nt">&lt;/filter-name&gt;</span>
                <span class="nt">&lt;url-pattern&gt;</span>/*<span class="nt">&lt;/url-pattern&gt;</span>
        <span class="nt">&lt;/filter-mapping&gt;</span>
<span class="nt">&lt;/web-app&gt;</span>
</code></pre>
</div>

<p>pom.xml</p>

<div class="language-xml highlighter-rouge"><pre class="highlight"><code><span class="nt">&lt;project</span> <span class="na">xmlns=</span><span class="s">"http://maven.apache.org/POM/4.0.0"</span> <span class="na">xmlns:xsi=</span><span class="s">"http://www.w3.org/2001/XMLSchema-instance"</span>
         <span class="na">xsi:schemaLocation=</span><span class="s">"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;modelVersion&gt;</span>4.0.0<span class="nt">&lt;/modelVersion&gt;</span>
    <span class="nt">&lt;groupId&gt;</span>leap.demo<span class="nt">&lt;/groupId&gt;</span>
    <span class="nt">&lt;artifactId&gt;</span>demo<span class="nt">&lt;/artifactId&gt;</span>
    <span class="nt">&lt;packaging&gt;</span>war<span class="nt">&lt;/packaging&gt;</span>
    <span class="nt">&lt;version&gt;</span>1.0<span class="nt">&lt;/version&gt;</span>
    <span class="nt">&lt;name&gt;</span>demo Maven Webapp<span class="nt">&lt;/name&gt;</span>
    <span class="nt">&lt;url&gt;</span>http://maven.apache.org<span class="nt">&lt;/url&gt;</span>
    <span class="c">&lt;!-- 配置leap的仓库 --&gt;</span>
    <span class="nt">&lt;repositories&gt;</span>
        <span class="c">&lt;!-- leap快照资源库 --&gt;</span>
        <span class="nt">&lt;repository&gt;</span>
            <span class="nt">&lt;id&gt;</span>leap-snapshots<span class="nt">&lt;/id&gt;</span>
            <span class="nt">&lt;url&gt;</span>https://raw.githubusercontent.com/leapframework/repo/master/snapshots<span class="nt">&lt;/url&gt;</span>
            <span class="nt">&lt;snapshots&gt;</span>
                <span class="nt">&lt;enabled&gt;</span>true<span class="nt">&lt;/enabled&gt;</span>
                <span class="nt">&lt;updatePolicy&gt;</span>always<span class="nt">&lt;/updatePolicy&gt;</span>
                <span class="nt">&lt;checksumPolicy&gt;</span>warn<span class="nt">&lt;/checksumPolicy&gt;</span>
            <span class="nt">&lt;/snapshots&gt;</span>
        <span class="nt">&lt;/repository&gt;</span>

        <span class="nt">&lt;repository&gt;</span>
            <span class="nt">&lt;id&gt;</span>leap-releases<span class="nt">&lt;/id&gt;</span>
            <span class="nt">&lt;url&gt;</span>https://raw.githubusercontent.com/leapframework/repo/master/releases<span class="nt">&lt;/url&gt;</span>
            <span class="nt">&lt;releases&gt;</span>
                <span class="nt">&lt;enabled&gt;</span>true<span class="nt">&lt;/enabled&gt;</span>
                <span class="nt">&lt;updatePolicy&gt;</span>never<span class="nt">&lt;/updatePolicy&gt;</span>
                <span class="nt">&lt;checksumPolicy&gt;</span>warn<span class="nt">&lt;/checksumPolicy&gt;</span>
            <span class="nt">&lt;/releases&gt;</span>
        <span class="nt">&lt;/repository&gt;</span>
    <span class="nt">&lt;/repositories&gt;</span>
    <span class="nt">&lt;dependencies&gt;</span>
        <span class="nt">&lt;dependency&gt;</span>
            <span class="nt">&lt;groupId&gt;</span>junit<span class="nt">&lt;/groupId&gt;</span>
            <span class="nt">&lt;artifactId&gt;</span>junit<span class="nt">&lt;/artifactId&gt;</span>
            <span class="nt">&lt;version&gt;</span>3.8.1<span class="nt">&lt;/version&gt;</span>
            <span class="nt">&lt;scope&gt;</span>test<span class="nt">&lt;/scope&gt;</span>
        <span class="nt">&lt;/dependency&gt;</span>
        <span class="c">&lt;!-- 配置leap的依赖 --&gt;</span>
        <span class="nt">&lt;dependency&gt;</span>
            <span class="nt">&lt;groupId&gt;</span>org.leapframework<span class="nt">&lt;/groupId&gt;</span>
            <span class="nt">&lt;artifactId&gt;</span>leap<span class="nt">&lt;/artifactId&gt;</span>
            <span class="nt">&lt;version&gt;</span>0.4.0b-SNAPSHOT<span class="nt">&lt;/version&gt;</span>
            <span class="nt">&lt;type&gt;</span>pom<span class="nt">&lt;/type&gt;</span>
        <span class="nt">&lt;/dependency&gt;</span>
    <span class="nt">&lt;/dependencies&gt;</span>
    <span class="nt">&lt;build&gt;</span>
        <span class="nt">&lt;finalName&gt;</span>demo<span class="nt">&lt;/finalName&gt;</span>
        <span class="nt">&lt;plugins&gt;</span>
            <span class="c">&lt;!-- 配置jetty运行插件 --&gt;</span>
            <span class="nt">&lt;plugin&gt;</span>
                <span class="nt">&lt;groupId&gt;</span>org.eclipse.jetty<span class="nt">&lt;/groupId&gt;</span>
                <span class="nt">&lt;artifactId&gt;</span>jetty-maven-plugin<span class="nt">&lt;/artifactId&gt;</span>
                <span class="nt">&lt;version&gt;</span>9.2.8.v20150217<span class="nt">&lt;/version&gt;</span>
            <span class="nt">&lt;/plugin&gt;</span>
        <span class="nt">&lt;/plugins&gt;</span>
    <span class="nt">&lt;/build&gt;</span>
<span class="nt">&lt;/project&gt;</span>
</code></pre>
</div>

<p>src/main/webapp/WEB-INF/views/index.html</p>

<div class="language-html highlighter-rouge"><pre class="highlight"><code><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html</span> <span class="na">lang=</span><span class="s">"en"</span><span class="nt">&gt;</span>
<span class="nt">&lt;head&gt;</span>
    <span class="nt">&lt;meta</span> <span class="na">charset=</span><span class="s">"UTF-8"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;title&gt;</span>leap<span class="nt">&lt;/title&gt;</span>
<span class="nt">&lt;/head&gt;</span>
<span class="nt">&lt;body&gt;</span>
    hello ${name}!
<span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</code></pre>
</div>

<p>配置完成。</p>

<p>现在我们先添加初始化代码：</p>

<p>创建包</p>

<div class="highlighter-rouge"><pre class="highlight"><code>$&gt; mkdir src/main/java/leap/demo/controller -p
</code></pre>
</div>

<p>创建Global类和HomeController类</p>

<div class="highlighter-rouge"><pre class="highlight"><code>$&gt; echo &gt;&gt; src/main/java/leap/demo/Global.java
$&gt; echo &gt;&gt; src/main/java/leap/demo/controller/HomeController.java
</code></pre>
</div>

<p>编辑两个类：</p>

<p>Global.java</p>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">leap.web.App</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Global</span> <span class="kd">extends</span> <span class="n">App</span> <span class="o">{</span>

    <span class="nd">@Override</span>
    <span class="kd">protected</span> <span class="kt">void</span> <span class="nf">init</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">Throwable</span> <span class="o">{</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"app init."</span><span class="o">);</span>
        <span class="kd">super</span><span class="o">.</span><span class="na">init</span><span class="o">();</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre>
</div>

<p>HomeController.java</p>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">demo.bean.BeanService</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">leap.core.annotation.Inject</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">leap.web.view.ViewData</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">HomeController</span> <span class="o">{</span>
    <span class="nd">@Inject</span>
    <span class="kd">private</span> <span class="n">BeanService</span> <span class="n">service</span><span class="o">;</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">index</span><span class="o">(</span><span class="n">ViewData</span> <span class="n">vd</span><span class="o">,</span> <span class="n">String</span> <span class="n">name</span><span class="o">){</span>
        <span class="n">vd</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"name"</span><span class="o">,</span> <span class="n">name</span><span class="o">);</span>

    <span class="o">}</span>
<span class="o">}</span>
</code></pre>
</div>

<p>现在可以用jetty运行我们的应用了。</p>

<div class="highlighter-rouge"><pre class="highlight"><code>$&gt; mvn jetty:run -Djetty.port=8888
</code></pre>
</div>

<p>现在在浏览器中访问<code class="highlighter-rouge">http://localhost:8888?name=leap</code>，即可看到页面打印如下字符串：</p>

<div class="highlighter-rouge"><pre class="highlight"><code>hello leap!
</code></pre>
</div>

<p>基础的web环境搭建完成，接下来就可以根据需要添加数据库配置和bean配置了，具体的配置方案请查阅官方文档。</p>

  </div>
  <hr/>
	<ul>
		<li><a href="/">首页</a></li>
		<li><a href="/quickstart">快速开始</a></li>
		<li><a href="/blog">博客</a></li>
		<li>
			
		   <a href="https://leapframework.gitbooks.io/doc/content/" target="_blank">文档</a>
		   
		</li>
	</ul>
  
</article>


    </div>

    <div class="wrapper-footer">
      <div class="container">
        <footer class="footer">
            <div class="svg-icon">
          
<a href="mailto:penghj@bingosoft.net"><i class="icon-envelope icon-2x"></i></a>


<a href="https://github.com/leapframework/framework"><i class="icon-github icon-2x"></i></a>
<a href="https://www.gitbook.com/@leapframework"><i class="icon-book icon-2x"></i></a>









            </div>
        </footer>
      </div>
    </div>


    

  </body>
</html>
